<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Ajax之代码的封装</title>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js" type="text/javascript"
            charset="utf-8"></script>
    <script type="text/javascript">

        function test(options) {
            var xhttp = new XMLHttpRequest();
            xhttp.onreadystatechange = function () {
                if (xhttp.readyState == 4 && xhttp.status == 200) {
                        console.log(xhttp.responseText)
                };
            };
            xhttp.onerror=function (){
                console.log("网络中断.....")
                alert("网络中断.....")
            };

            xhttp.open(options.type, options.url, true);
            xhttp.setRequestHeader("Content-Type",options.header);
            xhttp.send(options.parameter);
        };

        function test2() {
            var name = $("#name").val();
            var pwd = $("#pwd").val();

            // git方式提交数据
            var url = '/string/' + '?name=' + name + '&' + 'pwd=' + pwd
            test({
                    "type":"get",
                    "url":url,
                    "header":"text/plain",
                    "parameter":"",
                });
        };

        function test3() {
            var name = $("#name").val();
            var pwd = $("#pwd").val();

            // 表单方式提交数据
            var parameter = 'name=' + name + '&' + 'pwd=' + pwd
            test({
                    "type":"get",
                    "url":"/string/",
                    "header":"application/x-www-form-urlencoded",
                    "parameter":parameter,
                });
        };

        function test4() {
            var name = $("#name").val();
            var pwd = $("#pwd").val();

            // json方式提交数据
            var parameter = {"name":name, "pwd":pwd}
            parameter = JSON.stringify(parameter)
            test({
                    "type":"get",
                    "url":"/string/",
                    "header":"application/json",
                    "parameter":parameter,
                });
        };
    </script>
</head>
    <body>
        <hr>
        用户名：<input type="text" id="name" value="">
        <br>
        密码：<input type="text" id="pwd" value="">
        <br>
        <input type="submit" value="git提交" onclick="test2()">
        <input type="submit" value="表单提交" onclick="test3()">
        <input type="submit" value="json提交" onclick="test4()">
    </body>
</html>
