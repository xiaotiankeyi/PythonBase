<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Ajax之数据的处理</title>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js" type="text/javascript"
            charset="utf-8"></script>
    <script type="text/javascript">

        function test() {
            var xhttp = new XMLHttpRequest();
            xhttp.onreadystatechange = function () {
                if (this.readyState == 4 && this.status == 200) {
                    var a = $("#dome");
                    console.log(a)

                    // 返回字符串数据
                    console.log(this.responseText)

                    // 返回json数据
                    console.log(JSON.parse(this.responseText))

                };
            };
            xhttp.open("GET", "/string/", true);
            xhttp.send();
        };

        function test2() {
            var xhttp = new XMLHttpRequest();
            xhttp.onreadystatechange = function () {
                if (this.readyState == 4 && this.status == 200) {
                    console.log('发送成功')
                    // console.log(this.responseText)

                };
            };
            var name = $("#name").val();
            var pwd = $("#pwd").val();
            // git方式提交数据
            var url = '/string/' + '?name=' + name + '&' + 'pwd=' + pwd
            xhttp.open("GET", url, true);
            xhttp.send();
        };

        function test3() {
            var xhttp = new XMLHttpRequest();
            xhttp.onreadystatechange = function () {
                if (this.readyState == 4 && this.status == 200) {
                    console.log('发送成功')
                    // console.log(this.responseText)

                };
            };
            var name = $("#name").val();
            var pwd = $("#pwd").val();

            // 表单方式提交数据
            var parameter = 'name=' + name + '&' + 'pwd=' + pwd
            xhttp.open("post", "/string/", true);
            xhttp.setRequestHeader("Content-Type","application/x-www-form-urlencoded")
            xhttp.send(parameter);
        };

        function test4() {
            var xhttp = new XMLHttpRequest();
            xhttp.onreadystatechange = function () {
                if (this.readyState == 4 && this.status == 200) {
                    console.log('发送成功')
                    // console.log(this.responseText)
                    console.log(xhttp.status)
                    console.log(xhttp.readyState)};
            };
            xhttp.onerror=function (){
                console.log("网络中断.....")
                alert("网络中断.....")
            };

            var name = $("#name").val();
            var pwd = $("#pwd").val();

            // json方式提交数据
            var parameter = {"name":name, "pwd":pwd}
            xhttp.open("post", "/string/", true);
            xhttp.setRequestHeader("Content-Type","application/json")
            // 把字典转化为json
            xhttp.send(JSON.stringify(parameter));
        };
    </script>
</head>
    <body>
        <p id="dome">要被替换的数据</p>
        <button type="button" onclick="test()">点击按钮一</button>
        <hr>
        用户名：<input type="text" id="name" value="">
        <br>
        密码：<input type="text" id="pwd" value="">
        <br>
        <input type="submit" value="git提交" onclick="test2()">
        <input type="submit" value="表单提交" onclick="test3()">
        <input type="submit" value="json提交" onclick="test4()">
    </body>
</html>
